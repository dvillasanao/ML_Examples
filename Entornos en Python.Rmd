---
title: "Untitled"
author: "Diana Villasana Ocampo"
date: "2025-06-16"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Crear un entorno en RStudio que use **Quarto**, **reticulate**, y una versi√≥n espec√≠fica de **Python** (por ejemplo, `3.13.3`) implica coordinar varias herramientas. Aqu√≠ tienes una gu√≠a clara paso a paso para que funcione bien, especialmente en un entorno como **RStudio Cloud**.

---

## ‚úÖ Lo que necesitas saber y hacer

---

### 1. üì¶ **Tener instaladas las bibliotecas necesarias en R**

Aseg√∫rate de tener instalados estos paquetes:

```r
install.packages(c("reticulate", "quarto"))
```

---

### 2. üêç **Crear un entorno con reticulate + conda**

`reticulate` permite crear y manejar entornos con conda. Tu l√≠nea est√° casi bien, pero:

* La versi√≥n que mencionas, `3.13.3`, **no existe** a√∫n. (Hasta ahora, la versi√≥n m√°s reciente estable es Python `3.12.x`).
* Usa mejor una versi√≥n compatible, como `3.10` o `3.11`.

Ejemplo corregido:

```r
reticulate::conda_create('py-env', python_version = '3.10')
```

Esto:

* Crea un entorno llamado `py-env`
* Instala Python 3.10

---

### 3. ‚úÖ **Activar el entorno para tu proyecto Quarto**

Despu√©s de crearlo, activa el entorno en tu sesi√≥n R:

```r
reticulate::use_condaenv('py-env', required = TRUE)
```

Puedes incluir esa l√≠nea al principio de tu documento `.qmd` o en un archivo `.Rprofile`.

---

### 4. üß™ **Instalar paquetes de Python necesarios**

Usa `reticulate::py_install()` o `conda` directamente para instalar paquetes como `numpy`, `pandas`, `matplotlib`, etc.

```r
reticulate::py_install(c("pandas", "matplotlib"), envname = "py-env")
```

---

### 5. üßæ **Ejemplo de Quarto `.qmd` con Python + R**


```{r}
library(reticulate)
use_condaenv("py-env", required = TRUE)
reticulate::py_config()

if (requireNamespace("reticulate", quietly = TRUE)) {
  reticulate::use_condaenv("py-env", required = TRUE)
}

```


```{python}
import sys
print(sys.version)
```

```{r}
summary(cars)
```



> üîÑ Aseg√∫rate de que Quarto detecta tu kernel Python. Si no, corre:  
> `quarto install` desde la consola o terminal para registrarlo.

---

### 6. üß† Consejo extra para RStudio Cloud

En RStudio Cloud:

- **Conda no siempre viene preinstalado.** Usa Miniconda con:

```{r}
reticulate::install_miniconda()
```

* Y luego crea el entorno como arriba.



Muy buena pregunta. Para verificar que tu entorno conda se ha instalado correctamente y est√° funcionando en tu proyecto `.Rproj`, puedes hacerlo de varias maneras dentro de RStudio. Aqu√≠ te explico **c√≥mo saber si el entorno se instal√≥ correctamente y est√° activo**:

---

## ‚úÖ 1. **Verificar entornos conda disponibles**

Primero, ejecuta este comando:

```r
reticulate::conda_list()
```

Esto te mostrar√° todos los entornos conda disponibles. Deber√≠as ver una fila con el nombre del entorno que creaste (`py-env`, por ejemplo), junto con su ruta de instalaci√≥n.

---

## ‚úÖ 2. **Verificar que el entorno se puede activar**

Ahora intenta activarlo expl√≠citamente en tu sesi√≥n R:

```r
reticulate::use_condaenv("py-env", required = TRUE)
```

Si **no da error**, significa que el entorno existe y es usable.

---

## ‚úÖ 3. **Verificar versi√≥n de Python activa**

Despu√©s de activar el entorno, puedes confirmar que se est√° usando la versi√≥n de Python correcta con:

```r
reticulate::py_config()
```

Este comando te da informaci√≥n como:

* Ruta del ejecutable de Python
* Versi√≥n de Python activa
* Entorno conda en uso

---

## ‚úÖ 4. **Comprobar desde tu archivo `.Rproj` (opcional)**

Aunque `.Rproj` no guarda directamente qu√© entorno est√°s usando, puedes automatizar la activaci√≥n del entorno a√±adiendo una l√≠nea en tu archivo `.Rprofile`, que se ejecuta al abrir el proyecto.

**Ejemplo de `.Rprofile` en tu carpeta del proyecto:**

```r
# .Rprofile
if (requireNamespace("reticulate", quietly = TRUE)) {
  reticulate::use_condaenv("py-env", required = TRUE)
}
```

Esto asegura que cada vez que abras el proyecto en RStudio, `reticulate` intente usar ese entorno autom√°ticamente.

---

## ‚úÖ 5. **Comprobaci√≥n en un documento Quarto**

Abre o crea un `.qmd` y agrega este bloque:

```{python}
import sys
print(sys.executable)
print(sys.version)
```

Si imprime la ruta del entorno correcto y la versi√≥n de Python esperada, todo est√° bien configurado.

---

## üö´ Si algo falla...

Si ves errores como:

* ‚ÄúEnvironment not found‚Äù
* ‚ÄúPython version mismatch‚Äù
* ‚Äúconda not available‚Äù

Es probable que necesites instalar **Miniconda** primero:

```r
reticulate::install_miniconda()
```



¬øQuieres que te genere un ejemplo de `.Rprofile` + c√≥digo de prueba `.qmd` como plantilla de proyecto?

